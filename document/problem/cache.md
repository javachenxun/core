###1.[缓存常见问题](https://zhuanlan.zhihu.com/p/26151305)

####1.1.缓存穿透
	缓存穿透是指查询一个根本不存在的数据，缓存层和存储层都不会命中。	
**缓存，DB均可用,key无效**
	
解决:缓存中缓存空对象；

不足：带来缓存空间开销;

####1.2.缓存雪崩
	缓存雪崩是指由于某些原因整体不能提供服务，于是所有的请求都会达到存储层，即缓存整体宕机。
**缓存不可用,DB可用,key有效**
	
解决：尽可能服务做到高可用：Redis Sentinel 和 Redis Cluster 都实现了高可用；调用层降级,可采用[Hystrix](https://github.com/Netflix/Hystrix) 或服务层即数据存储层限流,只允许单线程去访问DB；
	
####1.3.热点Key
	出现问题的必要条件：热点 key，并发量非常大；热点可以设置了过期时间；key失效的一刻，大量访问直击DB，此刻可能出现DB宕机。
**缓存，DB均可用,key有效但过期**

解决1：互斥锁：即只允许一个线程（采用redis的setnx完成）去重建缓存；

不足1：死锁风险：比如setnx锁了，但是由于异常没有及时释放，只有等待setnx设置的时间过期，此刻尽可能设置setnx时间较短；线程池阻塞风险：在第一个线程去**重构缓存**的时候，其他大量现场处于阻塞状态；

解决2:设置key永远不过期；带来缓存空间开销；

###2.如何保障数据一致性
	先更新DB,再删除缓存:可以保证数据一致性
	先删除缓存,再更新DB:造成数据不一致
