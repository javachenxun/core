###1.基本理解及概念
* **协议分层:** TCP/IP协议栈的分层很类似Java开发中的三层架构模型，每一层只关注自己一层的事情，底层不依赖于上一层，但上层必须依赖于下层。
* **路由：**“路由控制是跨越整个互联网的分布式系统”，路由控制的IP数据包的流向，各个路由器协同，通过各种路由协议，算法（比如最短路径），定时广播或其他方式等得出一个较优的路由表来控制数据包的有效转发。
* 如何理解常常所谓的连接数? "如果确认了对方存在，那么设备就会为对话通讯分配内存、CPU处理时间等资源，设备所花的资源和维护的状态，就是连接。我目前见过最好的解释：[http://www.cnblogs.com/WreckBear/p/7581721.html](http://www.cnblogs.com/WreckBear/p/7581721.html)

###2.应用层
####2.1HTTP
* http1.0:每次建议一个tcp连接，效率低。http1.1:多个发送数据包复用一个连接。 https:ssl（或其他）+http即为https。

###3.传输层
####3.1 TCP：面向有连接
相比于UDP，TCP更复杂，有更多的优点去保证数据的可靠传输。<br/>
TCP的特点：连接管理，校验和，序列号，确认应答，重发控制，窗口控制

#####3.1.1理解TCP长连接通道：
TCP所谓的长连接，并不是一个真是存在的长连接通道，只是虚拟的一个通信线路，TCP客户端和服务端在时刻准备着发送和接收数据，形象的比作一个长连接通道。

#####3.1.2TCP的连接管理：建立及断开
TCP3次握手和4次挥手的流程图：一个tcp的连接和断开至少要经过7个步骤。
![](/01-TCP-Connect.png "TCP3次握手4次挥手")

#####3.1.3TCP校验和，序列号，确认应答：
* 校验和：TCP的checksum 是一个端到端的校验和，由发送端计算，然后由接收端验证。其目的是为了发现TCP首部和数据在发送端到接收端之间发生的任何改动。如果接收方检测到校验和有差错，则TCP段会被直接丢弃。TCP的校验和是必需的，而UDP的校验和是可选的。
* 序列号：
   * 序列号定义：给待发送数据的每一个字节标记一个序列号【真实的数据序列号为随机生成】（比如，从1开始，1,2,3...）
     * 由于TCP以段为单位封装一个TCP数据包进行发送，具体这个段为多少个字节，则是在3次握手的过程中确立的，段叫作：“MSS:最大消息长度”。3次握手时会在TCP首部有携带，最终客户端会在服务端和自己一方选择一个较小的MMS的值，作为TCP数据包的大小。
   * 序列号可以保证服务端不会接收重复的数据包（由于客户端未接收到确认应答，在等待一定时间后，会再次给服务端进行数据包的重发），已经接收的直接丢弃。
   * 序列号可以告诉客户端下一次应该发送那个起始序号的数据包
* 确认应答：服务端在接收到客户端发过来的数据包后，会回复给客户端一个确认应答（ACK：表示已经接收)

#####3.1.4TCP窗口控制：
* TCP窗口的出现缘由：当数据包很大时，需要切分更多的段来一个个的发送，如果每一次发送都很耗时时，效率将会很低。所以TCP就引入了一个窗口的概念。在我理解来，窗口的发送更像一个并发的发送数据过程。
* 窗口大小：无需服务端等待服务端应答客户端可以连续发送段（**此时段中包含的数据字节数比正常的大**）的最大值。
* 窗口的滑动：在收到确认应答后，窗口向前滑动，保证按顺序发送数据段。

#####3.1.5TCP重发控制：
* **高速重发控制**在发送去的途中丢失数据包：如何判断数据是在发送途中丢失？发送端在收到某个确认应答后，又连续三次收到同样的应该，即可判断数据已经丢失需要重新发送。
* **超时重发**：是指发送端在正常时间内没有接受到确认应答，当大于正常时间时，发送端会进行重发。<br/>
    2种重发高速重发控制比超时重发更为快速，有效。
* 丢失确认应该：在使用窗口发送数据时，即使丢掉少部分的确认应答也无所谓，可以通过一个确认应答来进行判断，此时是无需进行重发的

####3.2 UDP：面向无连接
随时发送数据，没有严格的控制机制。
###4.网络层
   
###5.以太网，无线LAN,PPP
 
 